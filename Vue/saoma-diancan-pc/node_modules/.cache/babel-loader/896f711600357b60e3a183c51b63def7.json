{"remainingRequest":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\babel-loader\\lib\\index.js!D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\src\\router\\index.js","dependencies":[{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\src\\router\\index.js","mtime":1733728524891},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\babel.config.js","mtime":1618227600000},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733062317302},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\babel-loader\\lib\\index.js","mtime":1733062318538}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.some\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:/git/Mashangdian/Vue/saoma-diancan-pc/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport store from \"../store\";\nVue.use(Router);\nvar router = new Router({\n  routes: [{\n    path: '/login',\n    name: 'login',\n    component: function component() {\n      return import(/* webpackChunkName: \"login\" */'@/page/login/login');\n    },\n    meta: {\n      requiresAuth: false\n    }\n  }, {\n    path: '/',\n    name: 'index',\n    component: function component() {\n      return import(/* webpackChunkName: \"layout\" */'@/page/index');\n    },\n    meta: {\n      requiresAuth: true\n    },\n    children: [{\n      path: '',\n      name: 'analysis',\n      component: function component() {\n        return import(/* webpackChunkName: \"analysis\" */'@/page/analysis/analysis');\n      },\n      meta: {\n        title: '数据分析'\n      }\n    }, {\n      path: 'order',\n      name: 'order',\n      component: function component() {\n        return import(/* webpackChunkName: \"order\" */'@/page/order/order');\n      },\n      meta: {\n        title: '订单管理'\n      }\n    }, {\n      path: 'dishes',\n      name: 'dishes',\n      component: function component() {\n        return import(/* webpackChunkName: \"dishes\" */'@/page/dish-management/dishes-list');\n      },\n      meta: {\n        title: '菜品管理'\n      }\n    }, {\n      path: 'category',\n      name: 'category',\n      component: function component() {\n        return import(/* webpackChunkName: \"category\" */'@/page/category/category');\n      },\n      meta: {\n        title: '分类管理'\n      }\n    }, {\n      path: 'table',\n      name: 'table',\n      component: function component() {\n        return import(/* webpackChunkName: \"table\" */'@/page/table-number/table');\n      },\n      meta: {\n        title: '餐桌管理'\n      }\n    }, {\n      path: 'set-up',\n      name: 'set-up',\n      component: function component() {\n        return import(/* webpackChunkName: \"setup\" */'@/page/set-up/set-up');\n      },\n      meta: {\n        title: '系统设置'\n      }\n    }, {\n      path: 'upload',\n      name: 'upload',\n      component: function component() {\n        return import(/* webpackChunkName: \"upload\" */'@/page/dish-management/upload-dishes');\n      },\n      meta: {\n        title: '添加/编辑菜品'\n      }\n    }]\n  }]\n});\n\n// 路由守卫\nrouter.beforeEach(/*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(to, from, next) {\n    var token, currentMerchant;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          // 设置页面标题\n          document.title = to.meta.title ? \"\".concat(to.meta.title, \" - \\u626B\\u7801\\u70B9\\u9910\\u7CFB\\u7EDF\") : '扫码点餐系统';\n          token = localStorage.getItem('token');\n          currentMerchant = JSON.parse(localStorage.getItem('currentMerchant') || '{}'); // 同步本地存储状态到 Vuex\n          if (token && currentMerchant.id && !store.state.token) {\n            store.commit('SET_TOKEN', token);\n            store.commit('SET_MERCHANT', currentMerchant);\n          }\n\n          // 判断是否需要登录权限\n          if (to.matched.some(function (record) {\n            return record.meta.requiresAuth;\n          })) {\n            // 需要登录权限\n            if (!token || !currentMerchant.id) {\n              // 未登录，重定向到登录页\n              next({\n                path: '/login',\n                query: {\n                  redirect: to.fullPath\n                }\n              });\n            } else {\n              next();\n            }\n          } else {\n            // 不需要登录权限的页面\n            if (to.path === '/login' && token && currentMerchant.id) {\n              // 已登录状态下访问登录页，重定向到首页\n              if (to.query.redirect) {\n                next({\n                  path: to.query.redirect\n                });\n              } else {\n                next({\n                  path: '/'\n                });\n              }\n            } else {\n              next();\n            }\n          }\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nexport default router;",{"version":3,"names":["Vue","Router","store","use","router","routes","path","name","component","meta","requiresAuth","children","title","beforeEach","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","to","from","next","token","currentMerchant","wrap","_callee$","_context","prev","document","concat","localStorage","getItem","JSON","parse","id","state","commit","matched","some","record","query","redirect","fullPath","stop","_x","_x2","_x3","apply","arguments"],"sources":["D:/git/Mashangdian/Vue/saoma-diancan-pc/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport store from '../store'\r\n\r\nVue.use(Router)\r\n\r\nconst router = new Router({\r\n    routes: [\r\n        {\r\n            path: '/login',\r\n            name: 'login',\r\n            component: () => import(/* webpackChunkName: \"login\" */ '@/page/login/login'),\r\n            meta: { requiresAuth: false }\r\n        },\r\n        {\r\n            path: '/',\r\n            name: 'index',\r\n            component: () => import(/* webpackChunkName: \"layout\" */ '@/page/index'),\r\n            meta: { requiresAuth: true },\r\n            children: [\r\n                {\r\n                    path: '',\r\n                    name: 'analysis',\r\n                    component: () => import(/* webpackChunkName: \"analysis\" */ '@/page/analysis/analysis'),\r\n                    meta: { title: '数据分析' }\r\n                },\r\n                {\r\n                    path: 'order',\r\n                    name: 'order',\r\n                    component: () => import(/* webpackChunkName: \"order\" */ '@/page/order/order'),\r\n                    meta: { title: '订单管理' }\r\n                },\r\n                {\r\n                    path: 'dishes',\r\n                    name: 'dishes',\r\n                    component: () => import(/* webpackChunkName: \"dishes\" */ '@/page/dish-management/dishes-list'),\r\n                    meta: { title: '菜品管理' }\r\n                },\r\n                {\r\n                    path: 'category',\r\n                    name: 'category',\r\n                    component: () => import(/* webpackChunkName: \"category\" */ '@/page/category/category'),\r\n                    meta: { title: '分类管理' }\r\n                },\r\n                {\r\n                    path: 'table',\r\n                    name: 'table',\r\n                    component: () => import(/* webpackChunkName: \"table\" */ '@/page/table-number/table'),\r\n                    meta: { title: '餐桌管理' }\r\n                },\r\n                {\r\n                    path: 'set-up',\r\n                    name: 'set-up',\r\n                    component: () => import(/* webpackChunkName: \"setup\" */ '@/page/set-up/set-up'),\r\n                    meta: { title: '系统设置' }\r\n                },\r\n                {\r\n                    path: 'upload',\r\n                    name: 'upload',\r\n                    component: () => import(/* webpackChunkName: \"upload\" */ '@/page/dish-management/upload-dishes'),\r\n                    meta: { title: '添加/编辑菜品' }\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n})\r\n\r\n// 路由守卫\r\nrouter.beforeEach(async (to, from, next) => {\r\n    // 设置页面标题\r\n    document.title = to.meta.title ? `${to.meta.title} - 扫码点餐系统` : '扫码点餐系统'\r\n    \r\n    const token = localStorage.getItem('token')\r\n    const currentMerchant = JSON.parse(localStorage.getItem('currentMerchant') || '{}')\r\n    \r\n    // 同步本地存储状态到 Vuex\r\n    if (token && currentMerchant.id && !store.state.token) {\r\n        store.commit('SET_TOKEN', token)\r\n        store.commit('SET_MERCHANT', currentMerchant)\r\n    }\r\n\r\n    // 判断是否需要登录权限\r\n    if (to.matched.some(record => record.meta.requiresAuth)) {\r\n        // 需要登录权限\r\n        if (!token || !currentMerchant.id) {\r\n            // 未登录，重定向到登录页\r\n            next({\r\n                path: '/login',\r\n                query: { redirect: to.fullPath }\r\n            })\r\n        } else {\r\n            next()\r\n        }\r\n    } else {\r\n        // 不需要登录权限的页面\r\n        if (to.path === '/login' && token && currentMerchant.id) {\r\n            // 已登录状态下访问登录页，重定向到首页\r\n            if (to.query.redirect) {\r\n                next({ path: to.query.redirect })\r\n            } else {\r\n                next({ path: '/' })\r\n            }\r\n        } else {\r\n            next()\r\n        }\r\n    }\r\n})\r\n\r\nexport default router"],"mappings":"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","ignoreList":[]}]}