{"remainingRequest":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\babel-loader\\lib\\index.js!D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\src\\api\\request.js","dependencies":[{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\src\\api\\request.js","mtime":1733730322988},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\babel.config.js","mtime":1618227600000},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733062317302},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\babel-loader\\lib\\index.js","mtime":1733062318538}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"D:/git/Mashangdian/Vue/saoma-diancan-pc/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.array.some\";\nimport _classCallCheck from \"D:/git/Mashangdian/Vue/saoma-diancan-pc/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/git/Mashangdian/Vue/saoma-diancan-pc/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _MessageBox2 from \"element-ui/lib/message-box\";\nimport _MessageBox from \"element-ui/lib/message-box\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport axios from 'axios';\nvar instance = axios.create({\n  timeout: 5000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 不需要自动添加merchantId的API白名单\nvar NO_MERCHANT_ID_APIS = ['/admin/orderDetail/list', '/admin/order/checkout', '/admin/order/receiving'];\n\n// 请求拦截器\ninstance.interceptors.request.use(function (config) {\n  var token = localStorage.getItem(\"token\");\n  if (token) {\n    config.headers.Authorization = token;\n  }\n  console.log('Request:', {\n    url: config.url,\n    method: config.method,\n    data: config.data,\n    params: config.params\n  });\n  return config;\n}, function (error) {\n  console.error('Request Error:', error);\n  return Promise.reject(error);\n});\n\n// 响应拦截器\ninstance.interceptors.response.use(function (response) {\n  console.log('Response:', response.data);\n  return response.data;\n}, function (error) {\n  console.error('Response Error:', error);\n  if (error.response) {\n    switch (error.response.status) {\n      case 401:\n        _MessageBox.alert('登录已过期，请重新登录', '提示', {\n          confirmButtonText: '确定',\n          type: 'warning',\n          showClose: false,\n          closeOnClickModal: false\n        }).then(function () {\n          localStorage.removeItem('token');\n          localStorage.removeItem('currentUser');\n          window.location.href = '/login';\n        });\n        break;\n      case 500:\n        _MessageBox.alert('服务器错误', '错误', {\n          confirmButtonText: '确定',\n          type: 'error'\n        });\n        break;\n      default:\n        var errorMsg = '请求失败';\n        if (error.response.data && error.response.data.msg) {\n          errorMsg = error.response.data.msg;\n        }\n        _MessageBox.alert(errorMsg, '错误', {\n          confirmButtonText: '确定',\n          type: 'error'\n        });\n    }\n  }\n  return Promise.reject(error);\n});\nvar request = /*#__PURE__*/function () {\n  function request(url, arg) {\n    _classCallCheck(this, request);\n    this.url = url;\n    this.arg = arg || {};\n  }\n  return _createClass(request, [{\n    key: \"modepost\",\n    value: function modepost() {\n      var _this = this;\n      // 检查是否在白名单中\n      var isExempt = NO_MERCHANT_ID_APIS.some(function (api) {\n        return _this.url.includes(api);\n      });\n\n      // 如果不在白名单中，则添加merchantId\n      var data = _objectSpread({}, this.arg);\n      if (!isExempt) {\n        data.merchantId = this.arg.merchantId || JSON.parse(localStorage.getItem('currentMerchant') || '{}').id;\n      }\n      return instance.post(this.url, data);\n    }\n  }, {\n    key: \"modeget\",\n    value: function modeget() {\n      var _this2 = this;\n      // 检查是否在白名单中\n      var isExempt = NO_MERCHANT_ID_APIS.some(function (api) {\n        return _this2.url.includes(api);\n      });\n\n      // 如果不在白名单中，则添加merchantId\n      var params = _objectSpread({}, this.arg);\n      if (!isExempt) {\n        params.merchantId = this.arg.merchantId || JSON.parse(localStorage.getItem('currentMerchant') || '{}').id;\n      }\n      return instance.get(this.url, {\n        params: params\n      });\n    }\n  }, {\n    key: \"modedelete\",\n    value: function modedelete() {\n      var _this3 = this;\n      // 检查是否在白名单中\n      var isExempt = NO_MERCHANT_ID_APIS.some(function (api) {\n        return _this3.url.includes(api);\n      });\n\n      // 如果不在白名单中，则添加merchantId\n      var params = _objectSpread({}, this.arg);\n      if (!isExempt) {\n        params.merchantId = this.arg.merchantId || JSON.parse(localStorage.getItem('currentMerchant') || '{}').id;\n      }\n      return instance.delete(this.url, {\n        params: params\n      });\n    }\n  }, {\n    key: \"modeput\",\n    value: function modeput() {\n      var _this4 = this;\n      // 检查是否在白名单中\n      var isExempt = NO_MERCHANT_ID_APIS.some(function (api) {\n        return _this4.url.includes(api);\n      });\n\n      // 如果不在白名单中，则添加merchantId\n      var data = _objectSpread({}, this.arg);\n      if (!isExempt) {\n        data.merchantId = this.arg.merchantId || JSON.parse(localStorage.getItem('currentMerchant') || '{}').id;\n      }\n      return instance.put(this.url, data);\n    }\n  }]);\n}();\nexport default request;",{"version":3,"names":["axios","instance","create","timeout","headers","NO_MERCHANT_ID_APIS","interceptors","request","use","config","token","localStorage","getItem","Authorization","console","log","url","method","data","params","error","Promise","reject","response","status","_MessageBox","alert","confirmButtonText","type","showClose","closeOnClickModal","then","removeItem","window","location","href","errorMsg","msg","arg","_classCallCheck","_createClass","key","value","modepost","_this","isExempt","some","api","includes","_objectSpread","merchantId","JSON","parse","id","post","modeget","_this2","get","modedelete","_this3","delete","modeput","_this4","put"],"sources":["D:/git/Mashangdian/Vue/saoma-diancan-pc/src/api/request.js"],"sourcesContent":["import axios from 'axios';\r\nimport { MessageBox } from 'element-ui';\r\n\r\nconst instance = axios.create({\r\n  timeout: 5000,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n// 不需要自动添加merchantId的API白名单\r\nconst NO_MERCHANT_ID_APIS = [\r\n  '/admin/orderDetail/list',\r\n  '/admin/order/checkout',\r\n  '/admin/order/receiving'\r\n];\r\n\r\n// 请求拦截器\r\ninstance.interceptors.request.use(\r\n  config => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      config.headers.Authorization = token;\r\n    }\r\n\r\n    console.log('Request:', {\r\n      url: config.url,\r\n      method: config.method,\r\n      data: config.data,\r\n      params: config.params\r\n    });\r\n    return config;\r\n  },\r\n  error => {\r\n    console.error('Request Error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// 响应拦截器\r\ninstance.interceptors.response.use(\r\n  response => {\r\n    console.log('Response:', response.data);\r\n    return response.data;\r\n  },\r\n  error => {\r\n    console.error('Response Error:', error);\r\n    if (error.response) {\r\n      switch (error.response.status) {\r\n        case 401:\r\n          MessageBox.alert('登录已过期，请重新登录', '提示', {\r\n            confirmButtonText: '确定',\r\n            type: 'warning',\r\n            showClose: false,\r\n            closeOnClickModal: false\r\n          }).then(() => {\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('currentUser');\r\n            window.location.href = '/login';\r\n          });\r\n          break;\r\n        case 500:\r\n          MessageBox.alert('服务器错误', '错误', {\r\n            confirmButtonText: '确定',\r\n            type: 'error'\r\n          });\r\n          break;\r\n        default:\r\n          let errorMsg = '请求失败';\r\n          if (error.response.data && error.response.data.msg) {\r\n            errorMsg = error.response.data.msg;\r\n          }\r\n          MessageBox.alert(errorMsg, '错误', {\r\n            confirmButtonText: '确定',\r\n            type: 'error'\r\n          });\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nconst request = class {\r\n  constructor(url, arg) {\r\n    this.url = url;\r\n    this.arg = arg || {};\r\n  }\r\n  \r\n  modepost() {\r\n    // 检查是否在白名单中\r\n    const isExempt = NO_MERCHANT_ID_APIS.some(api => this.url.includes(api));\r\n    \r\n    // 如果不在白名单中，则添加merchantId\r\n    const data = {\r\n      ...this.arg\r\n    };\r\n    \r\n    if (!isExempt) {\r\n      data.merchantId = this.arg.merchantId || JSON.parse(localStorage.getItem('currentMerchant') || '{}').id;\r\n    }\r\n    \r\n    return instance.post(this.url, data);\r\n  }\r\n  \r\n  modeget() {\r\n    // 检查是否在白名单中\r\n    const isExempt = NO_MERCHANT_ID_APIS.some(api => this.url.includes(api));\r\n    \r\n    // 如果不在白名单中，则添加merchantId\r\n    const params = {\r\n      ...this.arg\r\n    };\r\n    \r\n    if (!isExempt) {\r\n      params.merchantId = this.arg.merchantId || JSON.parse(localStorage.getItem('currentMerchant') || '{}').id;\r\n    }\r\n    \r\n    return instance.get(this.url, { params });\r\n  }\r\n\r\n  modedelete() {\r\n    // 检查是否在白名单中\r\n    const isExempt = NO_MERCHANT_ID_APIS.some(api => this.url.includes(api));\r\n    \r\n    // 如果不在白名单中，则添加merchantId\r\n    const params = {\r\n      ...this.arg\r\n    };\r\n    \r\n    if (!isExempt) {\r\n      params.merchantId = this.arg.merchantId || JSON.parse(localStorage.getItem('currentMerchant') || '{}').id;\r\n    }\r\n    \r\n    return instance.delete(this.url, { params });\r\n  }\r\n\r\n  modeput() {\r\n    // 检查是否在白名单中\r\n    const isExempt = NO_MERCHANT_ID_APIS.some(api => this.url.includes(api));\r\n    \r\n    // 如果不在白名单中，则添加merchantId\r\n    const data = {\r\n      ...this.arg\r\n    };\r\n    \r\n    if (!isExempt) {\r\n      data.merchantId = this.arg.merchantId || JSON.parse(localStorage.getItem('currentMerchant') || '{}').id;\r\n    }\r\n    \r\n    return instance.put(this.url, data);\r\n  }\r\n}\r\n\r\nexport default request;"],"mappings":"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","ignoreList":[]}]}