{"remainingRequest":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\src\\page\\order\\order.vue?vue&type=style&index=0&id=353189b4&scoped=scoped&lang=css","dependencies":[{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\src\\page\\order\\order.vue","mtime":1733924128057},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\css-loader\\index.js","mtime":1733062317246},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1733062317040},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\postcss-loader\\src\\index.js","mtime":1733062317103},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1733062317302},{"path":"D:\\git\\Mashangdian\\Vue\\saoma-diancan-pc\\node_modules\\vue-loader\\lib\\index.js","mtime":1733062316941}],"contextDependencies":[],"result":["\n@import url(\"../../../style/pubiss.css\");\n@import url(\"../../../style/popup.css\");\n::v-deep .el-pagination.is-background .el-pager li:not(.disabled).active {\n\tbackground-color: #00be06;\n\tcolor: #fff;\n}\n::v-deep .el-badge{\n\tmargin-right: 5px;\n}\n.menu-padd{\n\tborder-bottom: 1px solid #f8f8f8;\n}\n.Menu-details{\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 0 50px;\n}\n.menu-margin{margin: 20px 0;}\n.menu-span{\n\tfont-weight: bold;\n\tfont-size: 15px;\n\tpadding-top: 20px;\n}\n::v-deep .el-dialog{\n\theight: 600px;\n\toverflow-y: auto;\n\tborder-radius: 5px !important;\n}\n.content-view {\n\tpadding: 20px;\n}\n\n.query-view {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: 20px;\n\tbackground: #f5f7fa;\n\tpadding: 15px;\n\tborder-radius: 4px;\n}\n\n.quotation-query {\n\tmargin-right: 20px;\n}\n\n.stat-cards {\n\tmargin-bottom: 20px;\n}\n\n.stat-number {\n\tfont-size: 24px;\n\tfont-weight: bold;\n\tcolor: #409EFF;\n\ttext-align: center;\n}\n\n.pagination-container {\n\tmargin-top: 20px;\n\ttext-align: right;\n}\n\n.order-detail {\n\tpadding: 20px;\n}\n\n.detail-header {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(2, 1fr);\n\tgap: 15px;\n}\n\n.detail-item {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.detail-item .label {\n\tfont-weight: bold;\n\tmargin-right: 10px;\n\tcolor: #606266;\n}\n\n.menu-list {\n\tmargin: 20px 0;\n}\n\n.detail-footer {\n\ttext-align: right;\n\tmargin-top: 20px;\n}\n\n.total-amount {\n\tfont-size: 16px;\n}\n\n.total-amount .label {\n\tfont-weight: bold;\n\tcolor: #606266;\n}\n\n.total-amount .amount {\n\tcolor: #f56c6c;\n\tfont-size: 20px;\n\tfont-weight: bold;\n}\n\n.el-tag {\n\twidth: 80px;\n\ttext-align: center;\n}\n",{"version":3,"sources":["order.vue"],"names":[],"mappings":";AAyZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"order.vue","sourceRoot":"src/page/order","sourcesContent":["<template>\n\t<div class=\"ordering\" v-loading.fullscreen.lock=\"loading\">\n\t\t<div class=\"heading\">订单管理</div>\n\t\t<div class=\"content-view\">\n\t\t\t<!-- 操作区域 -->\n\t\t\t<div class=\"query-view\">\n\t\t\t\t<div class=\"quotation-query\">\n\t\t\t\t\t<el-button type=\"warning\" size=\"medium\" @click=\"refresh_order()\">刷新订单</el-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- 订单列表 -->\n\t\t\t<div v-if=\"nodatas\">\n\t\t\t\t<el-table\n\t\t\t\t\t:data=\"tabcont\"\n\t\t\t\t\tstyle=\"width: 100%\"\n\t\t\t\t\tborder\n\t\t\t\t\tstripe\n\t\t\t\t\tv-loading=\"loading\">\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\tprop=\"order_no\"\n\t\t\t\t\t\tlabel=\"订单号\"\n\t\t\t\t\t\twidth=\"180\">\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\tlabel=\"下单时间\"\n\t\t\t\t\t\twidth=\"160\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t{{formatDate(scope.row.create_time)}}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\tlabel=\"桌号\"\n\t\t\t\t\t\twidth=\"100\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t{{scope.row.table_number || '--'}}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\tlabel=\"订单金额\"\n\t\t\t\t\t\twidth=\"120\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t¥{{formatPrice(scope.row.total_amount)}}\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\tlabel=\"订单状态\"\n\t\t\t\t\t\twidth=\"120\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<el-tag :type=\"getStatusType(scope.row.status)\">\n\t\t\t\t\t\t\t\t{{getStatusText(scope.row.status)}}\n\t\t\t\t\t\t\t</el-tag>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t\t<el-table-column\n\t\t\t\t\t\tlabel=\"操作\"\n\t\t\t\t\t\twidth=\"250\">\n\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t<el-button\n\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t@click=\"detailed_menu(scope.$index, scope.row.id)\"\n\t\t\t\t\t\t\t\t:loading=\"scope.$index == deta_load\">\n\t\t\t\t\t\t\t\t查看详情\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t<el-button\n\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\t:type=\"scope.row.status == 2 ? 'info' : 'success'\"\n\t\t\t\t\t\t\t\tv-if=\"scope.row.status == 1 || scope.row.status == 2\"\n\t\t\t\t\t\t\t\t@click=\"receiving(scope.$index)\">\n\t\t\t\t\t\t\t\t{{scope.row.status == 2 ? '已接单' : '接单'}}\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t<el-button\n\t\t\t\t\t\t\t\tsize=\"mini\"\n\t\t\t\t\t\t\t\ttype=\"warning\"\n\t\t\t\t\t\t\t\tv-if=\"scope.row.status == 2\"\n\t\t\t\t\t\t\t\t@click=\"checkout(scope.$index, scope.row.id)\"\n\t\t\t\t\t\t\t\t:loading=\"scope.$index == check_load\">\n\t\t\t\t\t\t\t\t完成订单\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-table-column>\n\t\t\t\t</el-table>\n\t\t\t</div>\n\n\t\t\t<!-- 订单详情弹窗 -->\n\t\t\t<el-dialog\n\t\t\t\ttitle=\"订单详情\"\n\t\t\t\t:visible.sync=\"dialogVisible\"\n\t\t\t\twidth=\"600px\"\n\t\t\t\t:center=\"true\">\n\t\t\t\t<div v-if=\"currentOrder\" class=\"order-detail\">\n\t\t\t\t\t<div class=\"detail-header\">\n\t\t\t\t\t\t<div class=\"detail-item\">\n\t\t\t\t\t\t\t<span class=\"label\">订单号：</span>\n\t\t\t\t\t\t\t<span>{{currentOrder.order_no}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"detail-item\">\n\t\t\t\t\t\t\t<span class=\"label\">下单时间：</span>\n\t\t\t\t\t\t\t<span>{{formatDate(currentOrder.order_time)}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"detail-item\">\n\t\t\t\t\t\t\t<span class=\"label\">桌号：</span>\n\t\t\t\t\t\t\t<span>{{currentOrder.table_number}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"detail-item\">\n\t\t\t\t\t\t\t<span class=\"label\">用餐人数：</span>\n\t\t\t\t\t\t\t<span>{{currentOrder.number_of_diners || '--'}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<el-divider></el-divider>\n\t\t\t\t\t<div class=\"menu-list\">\n\t\t\t\t\t\t<el-table\n\t\t\t\t\t\t\t:data=\"user_menu\"\n\t\t\t\t\t\t\tborder\n\t\t\t\t\t\t\tstyle=\"width: 100%\">\n\t\t\t\t\t\t\t<el-table-column\n\t\t\t\t\t\t\t\tprop=\"name\"\n\t\t\t\t\t\t\t\tlabel=\"菜品名称\"\n\t\t\t\t\t\t\t\twidth=\"180\">\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t\t{{scope.row.name || '未知菜品'}}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t\t<el-table-column\n\t\t\t\t\t\t\t\tprop=\"quantity\"\n\t\t\t\t\t\t\t\tlabel=\"数量\"\n\t\t\t\t\t\t\t\twidth=\"100\">\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t\t{{scope.row.quantity}}{{scope.row.unit}}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t\t<el-table-column\n\t\t\t\t\t\t\t\tprop=\"price\"\n\t\t\t\t\t\t\t\tlabel=\"单价\"\n\t\t\t\t\t\t\t\twidth=\"100\">\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t\t¥{{formatPrice(scope.row.price)}}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t\t<el-table-column\n\t\t\t\t\t\t\t\tlabel=\"小计\"\n\t\t\t\t\t\t\t\twidth=\"100\">\n\t\t\t\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t\t\t\t¥{{formatPrice(scope.row.price * scope.row.quantity)}}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</el-table-column>\n\t\t\t\t\t\t</el-table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"detail-footer\">\n\t\t\t\t\t\t<div class=\"total-amount\">\n\t\t\t\t\t\t\t<span class=\"label\">订单总额：</span>\n\t\t\t\t\t\t\t<span class=\"amount\">¥{{formatPrice(currentOrder.total_amount)}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</el-dialog>\n\t\t</div>\n\t\t<div style=\"height: 120px;\"></div>\n\t</div>\n</template>\n\n<script>\n// 交状态\nimport {staff} from '../../../config/state-type.js'\nimport { mapGetters } from 'vuex'\n// 价格补领\nconst Price = require('e-commerce_price')\nexport default{\n\tdata() {\n\t\treturn {\n\t\t\tPrice:Price,\n\t\t\tloading: true,\n\t\t\tnodatas:true,\n\t\t\tdialogVisible:false,//出详细菜单\n\t\t\tdeta_load:-1,//查看详细菜单\n\t\t\trece_load:-1,//接单\n\t\t\tcheck_load:-1,//结账\n\t\t\tnodvalue:'没有订单数据',\n\t\t\ttablist:['交易时间','桌号','菜单详情','交易金额(元)','交易状态'],\n\t\t\ttabcont:[],\n\t\t\tuser_menu:[],//用户详细菜单\n\t\t\tdingdan:0,//订单提醒\n\t\t\tcurrentOrder: null,\n\t\t\tchangedOrders: new Set(), // 用于记录状态发生变化的订单ID\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters(['currentMerchant'])\n\t},\n\tmethods:{\n\t\t// 获取订单\n\t\tasync obtainorder(vle){\n\t\t\tconst oldPage = this.pagenum\n\t\t\ttry{\n\t\t\t\tconst params = {\n\t\t\t\t\tstart: (this.pagenum - 1) * this.pageSize, // 计算start\n\t\t\t\t\tpageSize: this.pageSize,\n\t\t\t\t\tmerchantId: this.currentMerchant.id\n\t\t\t\t}\n\t\t\t\tlet res = await new this.Request('/admin/order/list').modepost(params)\n\t\t\t\tconsole.log('获取订单列表响应：', res)\n\t\t\t\tif (res.code === 0) {\n\t\t\t\t\tthis.nodatas = res.orderList && res.orderList.length > 0\n\t\t\t\t\tthis.tabcont = res.orderList || []\n\t\t\t\t\tthis.total = res.total || 0\n\t\t\t\t\tthis.loading = false\n\t\t\t\t\tif(vle == 1){\n\t\t\t\t\t\tlocalStorage.setItem('order_num',0)\n\t\t\t\t\t\tthis.$store.commit('order_remind',0)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.$message.error(res.msg || '获取订单列表失败')\n\t\t\t\t\tthis.pagenum = oldPage\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tconsole.error('获取订单列表失败：', e)\n\t\t\t\tthis.$message.error('服务器发生错误,请重试')\n\t\t\t\tthis.pagenum = oldPage\n\t\t\t}\n\t\t\tthis.loading = false\n\t\t},\n\t\t// 查看详细菜单\n\t\tasync detailed_menu(index, id){\n\t\t\tthis.deta_load = index\n\t\t\ttry{\n\t\t\t\t// 打印调试信息\n\t\t\t\tconsole.log('订单ID:', id)\n\t\t\t\tconsole.log('订单信息:', this.tabcont[index])\n\t\t\t\t\n\t\t\t\tlet res = await new this.Request('/admin/orderDetail/list', { id: id }).modeget()\n\t\t\t\tconsole.log('订单详情响应：', res)\n\t\t\t\tif (res.code === 0) {\n\t\t\t\t\tconst order = this.tabcont[index]\n\t\t\t\t\tthis.currentOrder = {\n\t\t\t\t\t\t...order,\n\t\t\t\t\t\torder_time: order.create_time\n\t\t\t\t\t}\n\t\t\t\t\t// 处理订单详情数据\n\t\t\t\t\tthis.user_menu = res.list.map(item => ({\n\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\tname: item.name || '未知菜品',\n\t\t\t\t\t\tquantity: item.quantity || 0,\n\t\t\t\t\t\tprice: item.price || 0,\n\t\t\t\t\t\tunit: item.unit || '份',\n\t\t\t\t\t\ttotal_price: (item.quantity * item.price) || 0\n\t\t\t\t\t}))\n\t\t\t\t\tthis.dialogVisible = true\n\t\t\t\t} else {\n\t\t\t\t\tthis.$message.error(res.msg || '获取订单详情失败')\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tconsole.error('获取订单详情失败：', e)\n\t\t\t\tthis.$message.error('服务器发生错误，请重试')\n\t\t\t} finally {\n\t\t\t\tthis.deta_load = -1\n\t\t\t}\n\t\t},\n\t\t// 接单状态切换\n\t\tasync receiving(index){\n\t\t\ttry {\n\t\t\t\tconst order = this.tabcont[index]\n\t\t\t\tconst newStatus = order.status == 2 ? 1 : 2\n\t\t\t\t\n\t\t\t\t// 调用后端接口\n\t\t\t\tconst res = await new this.Request('/admin/order/receiving', {\n\t\t\t\t\tid: order.id,\n\t\t\t\t\tstatus: newStatus\n\t\t\t\t}).modepost()\n\t\t\t\t\n\t\t\t\tif (res.code === 0) {\n\t\t\t\t\t// 后端更新成功后，再更新前端状态\n\t\t\t\t\torder.status = newStatus\n\t\t\t\t\tthis.$forceUpdate()\n\t\t\t\t\tthis.$message.success(newStatus === 2 ? '接单成功' : '取消接单成功')\n\t\t\t\t} else {\n\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\n\t\t\t\t}\n\t\t\t} catch(e) {\n\t\t\t\tconsole.error('订单状态修改失败：', e)\n\t\t\t\tthis.$message.error('服务器发生错误，请重试')\n\t\t\t}\n\t\t},\n\t\t// 结账\n\t\tasync checkout(index,id){\n\t\t\tthis.check_load = index\n\t\t\ttry{\n\t\t\t\tlet res = await new this.Request('/admin/order/checkout', {\n\t\t\t\t\tid: id,\n\t\t\t\t\tstatus: 3  // 3表示已完成状态\n\t\t\t\t}).modepost()\n\t\t\t\t\n\t\t\t\tif (res.code === 0) {\n\t\t\t\t\tthis.$set(this.tabcont[index],'status', 3)\n\t\t\t\t\tthis.$message.success('完成订单成功')\n\t\t\t\t} else {\n\t\t\t\t\tthis.$message.error(res.msg || '完成订单失败')\n\t\t\t\t}\n\t\t\t}catch(e){\n\t\t\t\tconsole.error('完成订单失败：', e)\n\t\t\t\tthis.$message.error('服务器发生错误,请重试')\n\t\t\t}\n\t\t\tthis.check_load = -1\n\t\t},\n\t\t// 刷新订单\n\t\trefresh_order(){\n\t\t\tthis.loading = true\n\t\t\tthis.deta_load = -1//查看详细菜单\n\t\t\tthis.rece_load = -1//接单\n\t\t\tthis.check_load = -1//结账\n\t\t\tthis.obtainorder(1)\n\t\t},\n\t\tformatDate(date) {\n\t\t\tif (!date) return '--';\n\t\t\tconst d = new Date(date);\n\t\t\tconst year = d.getFullYear();\n\t\t\tconst month = String(d.getMonth() + 1).padStart(2, '0');\n\t\t\tconst day = String(d.getDate()).padStart(2, '0');\n\t\t\tconst hour = String(d.getHours()).padStart(2, '0');\n\t\t\tconst minute = String(d.getMinutes()).padStart(2, '0');\n\t\t\treturn `${year}-${month}-${day} ${hour}:${minute}`;\n\t\t},\n\t\tformatPrice(price) {\n\t\t\tif (!price) return '0.00';\n\t\t\treturn this.Price(price);\n\t\t},\n\t\t// 获取状态类型\n\t\tgetStatusType(status) {\n\t\t\tconst types = {\n\t\t\t\t'1': 'warning',\n\t\t\t\t'2': 'success',\n\t\t\t\t'3': 'info',\n\t\t\t\t'4': 'danger'\n\t\t\t}\n\t\t\treturn types[status] || 'info'\n\t\t},\n\t\t// 获取状态文本\n\t\tgetStatusText(status) {\n\t\t\tif (!status) return '未知';\n\t\t\tconst texts = {\n\t\t\t\t'1': '待支付',\n\t\t\t\t'2': '已支付',\n\t\t\t\t'3': '已完成',\n\t\t\t\t'4': '已取消'\n\t\t\t}\n\t\t\treturn texts[status] || '未知'\n\t\t},\n\t\t// 分页切换\n\t\tcurrentchange(e){\n\t\t\tthis.pagenum = e\n\t\t\tthis.obtainorder(0)\n\t\t},\n\t\t// 每页条数改变\n\t\thandleSizeChange(val) {\n\t\t\tthis.pageSize = val\n\t\t\tthis.pagenum = 1 // 重置到第一页\n\t\t\tthis.obtainorder(0)\n\t\t},\n\t\t// 保存状态到数据库\n\t\tasync saveStatusToDatabase() {\n\t\t\tif (this.changedOrders.size === 0) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// 只保存发生变化的订单状态，但排除接单状态的变化\n\t\t\t\tfor (let order of this.tabcont) {\n\t\t\t\t\tif (this.changedOrders.has(order.id) && order.status !== 1 && order.status !== 2) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet res = await new this.Request('/admin/order/checkout').modepost({\n\t\t\t\t\t\t\t\tid: order.id,\n\t\t\t\t\t\t\t\tstatus: order.status\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (res.code !== 0) {\n\t\t\t\t\t\t\t\tconsole.error(`订单 ${order.id} 状态保存失败：${res.msg}`)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tconsole.error(`订单 ${order.id} 状态保存失败：`, err)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('保存订单状态失败：', e)\n\t\t\t} finally {\n\t\t\t\tthis.changedOrders.clear()\n\t\t\t\tthis.obtainorder(0)\n\t\t\t}\n\t\t},\n\t},\n\tcreated() {\n\t\t// 获取订单\n\t\tthis.obtainorder(0)\n\t\t// 订单提醒\n\t\tthis.dingdan = localStorage.getItem(\"order_num\")\n\t},\n\tbeforeDestroy() {\n\t\t// 在组件销毁前保存状态到数据库\n\t\tthis.saveStatusToDatabase()\n\t},\n\twatch: {\n\t\t// 听订单提醒\n\t\t\"$store.state.remind\"(newValue, oldValue) {\n\t\t\tthis.dingdan = newValue.num\n\t\t}\n\t},\n}\n</script>\n\n<style scoped=\"scoped\">\n@import url(\"../../../style/pubiss.css\");\n@import url(\"../../../style/popup.css\");\n::v-deep .el-pagination.is-background .el-pager li:not(.disabled).active {\n\tbackground-color: #00be06;\n\tcolor: #fff;\n}\n::v-deep .el-badge{\n\tmargin-right: 5px;\n}\n.menu-padd{\n\tborder-bottom: 1px solid #f8f8f8;\n}\n.Menu-details{\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 0 50px;\n}\n.menu-margin{margin: 20px 0;}\n.menu-span{\n\tfont-weight: bold;\n\tfont-size: 15px;\n\tpadding-top: 20px;\n}\n::v-deep .el-dialog{\n\theight: 600px;\n\toverflow-y: auto;\n\tborder-radius: 5px !important;\n}\n.content-view {\n\tpadding: 20px;\n}\n\n.query-view {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: 20px;\n\tbackground: #f5f7fa;\n\tpadding: 15px;\n\tborder-radius: 4px;\n}\n\n.quotation-query {\n\tmargin-right: 20px;\n}\n\n.stat-cards {\n\tmargin-bottom: 20px;\n}\n\n.stat-number {\n\tfont-size: 24px;\n\tfont-weight: bold;\n\tcolor: #409EFF;\n\ttext-align: center;\n}\n\n.pagination-container {\n\tmargin-top: 20px;\n\ttext-align: right;\n}\n\n.order-detail {\n\tpadding: 20px;\n}\n\n.detail-header {\n\tdisplay: grid;\n\tgrid-template-columns: repeat(2, 1fr);\n\tgap: 15px;\n}\n\n.detail-item {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.detail-item .label {\n\tfont-weight: bold;\n\tmargin-right: 10px;\n\tcolor: #606266;\n}\n\n.menu-list {\n\tmargin: 20px 0;\n}\n\n.detail-footer {\n\ttext-align: right;\n\tmargin-top: 20px;\n}\n\n.total-amount {\n\tfont-size: 16px;\n}\n\n.total-amount .label {\n\tfont-weight: bold;\n\tcolor: #606266;\n}\n\n.total-amount .amount {\n\tcolor: #f56c6c;\n\tfont-size: 20px;\n\tfont-weight: bold;\n}\n\n.el-tag {\n\twidth: 80px;\n\ttext-align: center;\n}\n</style>\n"]}]}