{"version":3,"sources":["uni-app:///main.js","webpack:///D:/git/Mashangdian/Uni/diancan-user/pages/home-page/page.vue?efed","webpack:///D:/git/Mashangdian/Uni/diancan-user/pages/home-page/page.vue?c6b5","webpack:///D:/git/Mashangdian/Uni/diancan-user/pages/home-page/page.vue?947b","webpack:///D:/git/Mashangdian/Uni/diancan-user/pages/home-page/page.vue?741b","uni-app:///pages/home-page/page.vue","webpack:///D:/git/Mashangdian/Uni/diancan-user/pages/home-page/page.vue?6fad","webpack:///D:/git/Mashangdian/Uni/diancan-user/pages/home-page/page.vue?7b75"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","Cart","Details","Home","data","baseUrl","exist","Modelmes","itemize","trigger","goods","heightset","tophei","scroll_into","card","shopping_card","popupitem","pro_details","tmplIds","number_people","merchantId","inputUserName","userNamePopupVisible","methods","itemIze","setTimeout","scroLl","plus","image","name","unitprice","unit","id","dish_id","quantity","price","total_price","cid","good_index","reduce","shopping_Cart","console","qunint_of_goods","array","res","M","value","shopping_Cart_add_sub","empty_data","item","T","popup_item","index","itemgood","pop_Shopping","dishEs","url","method","categoryList","uni","title","icon","duration","goods_height","query","cate_height","placean_order","success","fail","sub_database","mask","userId","table_number","goods_list","total_amount","order_no","orderData","status","orderDetails","create_time","push_message","pubsub","channel","message","onSuccess","onFailed","my_order","showUserNamePopup","closeUserNamePopup","confirmUserName","userName","onLoad","tableNumber","computed","total_quantity","total"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACqC;;;AAGxF;AAC+K;AAC/K,gBAAgB,mLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mPAEN;AACP,KAAK;AACL;AACA,aAAa,mVAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtCA;AAAA;AAAA;AAAA;AAA6pB,CAAgB,4oBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC8FjrB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAOA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;IACA;EACA;;EACAC;IACA;IACAC;MAAA;MACA;MACA;MACAC;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QAAA;QACA;QACA;UACA;QACA;MACA;QAAA;QACA;QACA;UACA;QACA;MACA;MACA;IACA;IAEA;IACAC;MACA;QAAAC;QAAAC;QAAAC;QAAAC;QAAAC;MACA;MACA;MACA;QACAC;QACAC;QACAC;QACA;QACAP;QACAC;QACAE;QACAK;QACAC;QACAC;MACA;MACA;IACA;IAEA;IACAC;MACA;QAAAX;QAAAC;QAAAC;QAAAC;QAAAC;MACA;MACA;MACA;QACAC;QACAC;QACAC;QACA;QACAP;QACAC;QACAE;QACAK;QACAC;QACAC;MACA;MACA;IACA;IAEA;IACAE;MACA;QACA;QACA;MACA;QACA;QACA;UAAA;QAAA;QACA;UACA;UACA;QACA;UACA;UACA;UACA;QACA;MACA;MACAC;MACA;IACA;IAEA;IACAC;MAAA;MACA;MACA;MACAC;QACA;UACAC;QACA;UACAA;QACA;MACA;MACA;MACA;QACAC;UAAAR;UAAAS;QAAA;MACA;MACAD;QACA;UAAA;QAAA;QACA;MACA;IACA;IAGA;IACAE;MACA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;;MAEA;MACA;QAAA;MAAA;MACA;QACA;MACA;MAEA;IACA;IAEA;IACAC;MACA;MACA;QAAAC;MAAA;MACA;QACAA;UACAC;QACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;MAAA;MAAA;MAAA;MACA;MACA;QAAAC;QAAAd;QAAAD;QAAAgB;MAAA;MACAZ;IACA;IACA;IACAa;MAAA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAEAd;gBACA;gBACArB;gBACAqB;gBAAA,IAEArB;kBAAA;kBAAA;gBAAA;gBAAA,MACA;cAAA;gBAAA;gBAAA,OAIA;kBACAoC;kBACAC;kBACArD;oBAAAgB;kBAAA;gBACA;cAAA;gBAJAwB;gBAMAH;gBAAA,MAEAG;kBAAA;kBAAA;gBAAA;gBACAc;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACAjB;;gBAEA;gBACA;gBACA;g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","file":"pages/home-page/page.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/home-page/page.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./page.vue?vue&type=template&id=2f68e6da&scoped=true&\"\nvar renderjs\nimport script from \"./page.vue?vue&type=script&lang=js&\"\nexport * from \"./page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./page.vue?vue&type=style&index=0&id=2f68e6da&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f68e6da\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home-page/page.vue\"\nexport default component.exports","export * from \"-!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./page.vue?vue&type=template&id=2f68e6da&scoped=true&\"","var components\ntry {\n  components = {\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/@dcloudio/uni-ui/lib/uni-popup/uni-popup\" */ \"@dcloudio/uni-ui/lib/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniPopupDialog: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog\" */ \"@dcloudio/uni-ui/lib/uni-popup-dialog/uni-popup-dialog.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./page.vue?vue&type=script&lang=js&\"","<template>\n <view class=\"container\">\n   <!-- 顶部 -->\n   <view class=\"top-view\">\n     <view>{{number_people}}人就餐</view>\n     <view class=\"top-view-flex\">\n       <image class=\"top-image\" src=\"/static/tab/fenxiang.svg\" mode=\"widthFix\"></image>\n     </view>\n   </view>\n   \n   <view class=\"order-view\">\n     <view class=\"commodity\">\n       <!-- 左侧分类列表 -->\n       <scroll-view class=\"order-left\" scroll-y=\"true\">\n         <view class=\"itemize-text\" v-for=\"(item,index) in itemize\" :key=\"index\" \n               :class=\"trigger === index ? 'active' : ''\" @click=\"itemIze(index,item.cid)\">\n           <text class=\"text-item\">{{item.value}}</text>\n           <text class=\"text-item\" v-if=\"item.sele_quantity > 0\">{{item.sele_quantity}}</text>\n         </view>\n       </scroll-view>\n       \n       <!-- 右侧商品列表 -->\n       <scroll-view class=\"order-right\" scroll-y=\"true\" :scroll-into-view=\"scroll_into\" \n                   @scroll=\"scroLl\" :scroll-with-animation=\"true\">\n         <view v-for=\"(item,index) in goods\" :key=\"index\" :id=\"item.cid\">\n           <view class=\"classif\">{{item.value}}</view>\n           <view class=\"classif-goods\" v-for=\"(good,good_index) in item.dishList\" :key=\"good_index\">\n             <view class=\"goods-image\" @click=\"popup_item(true,index,good_index,item.cid,good)\">\n               <image class=\"goods-img\" :src=\"baseUrl + '/image/dish/' + good.image\" mode=\"aspectFill\"></image>\n             </view>\n             <view class=\"goods-Price\">\n               <view class=\"goods-name\">\n                 <text class=\"name-text Bold\">{{good.name}}</text>\n                 <text class=\"name-text Thinning\">月售 {{good.monthlysale}}</text>\n               </view>\n               <view class=\"unit-price\">\n                 <text class=\"Symbol\">¥</text>\n                 <text class=\"Bold\">{{good.unitprice}}</text>\n                 <text class=\"Thinning\">/{{good.unit}}</text>\n               </view>\n             </view>\n             <view class=\"quantity\">\n               <view v-if=\"good.quantity > 0\">\n                 <image class=\"quantity-img\" src=\"/static/tab/jianhao.png\" mode=\"widthFix\" \n                        @click=\"reduce(index,good_index,item.cid,good)\"></image>\n               </view>\n               <view v-if=\"good.quantity > 0\">{{good.quantity}}</view>\n               <view>\n                 <image class=\"quantity-img\" src=\"/static/tab/jia.png\" mode=\"widthFix\" \n                        @click=\"plus(index,good_index,item.cid,good)\"></image>\n               </view>\n             </view>\n           </view>\n         </view>\n       </scroll-view>\n     </view>\n\n     <!-- 底部购物车和结账按钮 -->\n     <view class=\"order-bottom\">\n       <view class=\"shopping\" @click=\"pop_Shopping()\">\n         <image class=\"shopping-image\" src=\"/static/tab/gouwuche.png\" mode=\"widthFix\"></image>\n         <view class=\"shopping-num\" v-if=\"total_quantity > 0\">{{total_quantity}}</view>\n       </view>\n       <view class=\"order-price\">\n         <text class=\"price-symbol\">¥</text>\n         <text class=\"price-value\">{{total_price}}</text>\n       </view>\n       <view class=\"order-button\" @click=\"placean_order\">去结账</view>\n     </view>\n   </view>\n\n   <!-- 购物车 -->\n   <Cart v-if=\"card\" :shopping_card=\"shopping_card\"></Cart>\n   <!-- 引入单个商品弹出 -->\n   <Details v-if=\"popupitem\" :pro_details=\"pro_details\"></Details>\n   <!-- 骨架屏 -->\n   <Home v-if=\"exist\"></Home>\n   <!-- 用户名输入弹窗 -->\n   <uni-popup ref=\"userNamePopup\" type=\"dialog\">\n     <uni-popup-dialog\n       mode=\"input\"\n       title=\"请输入您的姓名\"\n       placeholder=\"请输入姓名\"\n       :value=\"inputUserName\"\n       :beforeClose=\"true\"\n       @confirm=\"confirmUserName\"\n       @close=\"closeUserNamePopup\">\n     </uni-popup-dialog>\n   </uni-popup>\n </view>\n</template>\n\n\n<script>\nimport {getBaseUrl, requestUtil} from \"../../utils/requestUtil.js\"\nconst app = getApp()\nconst {Modelmes} = app.globalData\n// 骨架屏\nimport Home from '../skeleton-view/home.vue'\n// 购物车子组件\nimport Cart from './components/shopping-cart.vue'\n// 单个商品弹出\nimport Details from './components/goods-details.vue'\n\nexport default {\n\tcomponents: {\n\t\tCart,\n\t\tDetails,\n\t\tHome\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tbaseUrl: getBaseUrl(), // 直接初始化 baseUrl\n\t\t\texist: true,\n\t\t\tModelmes,\n\t\t\titemize: [], //类目\n\t\t\ttrigger: 0, //类目选中的值\n\t\t\tgoods: [], //所有菜品\n\t\t\theightset: [], //存储右边每一个分类菜品的高度\n\t\t\ttophei: 0, //滚动时距离顶部的高度\n\t\t\tscroll_into: '',\n\t\t\tcard: false, //购物车隐藏\n\t\t\tshopping_card: [], //购物车里的数据\n\t\t\tpopupitem: false, //单个商品弹出框隐藏\n\t\t\tpro_details: {}, //单个商品弹出框里的数据\n\t\t\ttmplIds: 'FANEJh9NPNhJrLpqQx7UhNerntR5GwEsLKK-95tuvNM', //模板id\n\t\t\tnumber_people: 0, //用餐人数\n\t\t\tmerchantId: 0, // 商家ID\n\t\t\tinputUserName: '', // 用户输入的姓名\n\t\t\tuserNamePopupVisible: false // 添加控制弹窗显示的状态\n\t\t}\n\t},\n\tmethods:{\n\t\t// 点击类目加上背景色\n\t\titemIze(index,cid){\n\t\t\tthis.trigger = index\n\t\t\tthis.scroll_into = cid\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.scroll_into = ''\n\t\t\t},200)\n\t\t},\n\t\t// 右边菜品滚动时触发\n\t\tscroLl(event){\n\t\t\t// console.log(event.detail.scrollTop)\n\t\t\tlet scrollTop = event.detail.scrollTop\n\t\t\tif(scrollTop >= this.tophei){//上拉\n\t\t\t\t// 当前分类商品的高度小滚动高度时跳转下一个分类\n\t\t\t\tif(scrollTop >= this.heightset[this.trigger]){\n\t\t\t\t\tthis.trigger += 1\n\t\t\t\t}\n\t\t\t}else{//下拉\n\t\t\t\t// 当前分类商品的高度大于滚动高度时跳转下一个分类\n\t\t\t\tif(scrollTop < this.heightset[this.trigger - 1]){\n\t\t\t\t\tthis.trigger -= 1\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.tophei = scrollTop\n\t\t},\n\t\t\n\t\t// 单个商品+\n\t\tplus(index,good_index,cid,itemgood){\n\t\t\tconst {quantity,image,name,unitprice,unit,id} = itemgood\n\t\t\tconst QU = quantity + 1\n\t\t\tthis.$set(this.goods[index].dishList[good_index],'quantity',QU)\n\t\t\tconst arr = {\n\t\t\t\tdish_id: id,\n\t\t\t\tquantity: QU,\n\t\t\t\tprice: unitprice,\n\t\t\t\t// 以下字段仅用于前端显示\n\t\t\t\timage,\n\t\t\t\tname,\n\t\t\t\tunit,\n\t\t\t\ttotal_price: unitprice * QU,\n\t\t\t\tcid,\n\t\t\t\tgood_index\n\t\t\t}\n\t\t\tthis.shopping_Cart(arr)\n\t\t},\n\t\t\n\t\t// 单个商品-\n\t\treduce(index,good_index,cid,itemgood){\n\t\t\tconst {quantity,image,name,unitprice,unit,id} = itemgood\n\t\t\tconst QU = quantity - 1\n\t\t\tthis.$set(this.goods[index].dishList[good_index],'quantity',QU)\n\t\t\tconst arr = {\n\t\t\t\tdish_id: id,\n\t\t\t\tquantity: QU,\n\t\t\t\tprice: unitprice,\n\t\t\t\t// 以下字段仅用于前端显示\n\t\t\t\timage,\n\t\t\t\tname,\n\t\t\t\tunit,\n\t\t\t\ttotal_price: unitprice * QU,\n\t\t\t\tcid,\n\t\t\t\tgood_index\n\t\t\t}\n\t\t\tthis.shopping_Cart(arr)\n\t\t},\n\t\t\n\t\t// 添加进物车的商品\n\t\tshopping_Cart(arr){\n\t\t\tif(this.shopping_card.length == 0){\n\t\t\t\t// 一：购物车没有数据，空数组：\n\t\t\t\tthis.shopping_card.push(arr)\n\t\t\t}else{\n\t\t\t\t// 二：购物车里有数据\n\t\t\t\tlet itemindex = this.shopping_card.findIndex(item => item.dish_id == arr.dish_id)\n\t\t\t\tif(itemindex == -1){\n\t\t\t\t\t// 没有相同的菜品存在\n\t\t\t\t\tthis.shopping_card.unshift(arr)\n\t\t\t\t}else{\n\t\t\t\t\t// 更新数量和总价\n\t\t\t\t\tthis.$set(this.shopping_card[itemindex],'quantity',arr.quantity)\n\t\t\t\t\tthis.$set(this.shopping_card[itemindex],'total_price',arr.price * arr.quantity)\n\t\t\t\t}\n\t\t\t}\n\t\t\tconsole.log('购物车数据:', this.shopping_card)\n\t\t\tthis.qunint_of_goods()\n\t\t},\n\t\t\n\t\t// 计算左边各分类下少菜品\n\t\tqunint_of_goods(){\n\t\t\tlet array = this.shopping_card\n\t\t\tlet res = {}\n\t\t\tarray.forEach(item=>{\n\t\t\t\tif(res[item.cid]){\n\t\t\t\t\tres[item.cid] += item.quantity\n\t\t\t\t}else{\n\t\t\t\t\tres[item.cid] = item.quantity\n\t\t\t\t}\n\t\t\t})\n\t\t\tlet M = []\n\t\t\tfor(let k in res){\n\t\t\t\tM.push({cid:k,value:res[k]})\n\t\t\t}\n\t\t\tM.forEach(item=>{\n\t\t\t\tlet res_index = this.itemize.findIndex(iteming => iteming.cid == item.cid)\n\t\t\t\tthis.$set(this.itemize[res_index],'sele_quantity', item.value)\n\t\t\t})\n\t\t},\n\t\t\n\t\t\n\t\t//购物车商品加减数量\n\t\tshopping_Cart_add_sub(index,QU,dish_id,cid,good_index,price){\n\t\t\tif(QU <= 0){\n\t\t\t\t// 如果数量为0，从购物车中移除\n\t\t\t\tthis.shopping_card.splice(index, 1)\n\t\t\t} else {\n\t\t\t\t// 更新购物车中的数量和总价\n\t\t\t\tthis.$set(this.shopping_card[index],'quantity',QU)\n\t\t\t\tthis.$set(this.shopping_card[index],'total_price',QU * price)\n\t\t\t}\n\t\t\t\n\t\t\t// 更新商品列表中的数量\n\t\t\tconst itemcid = this.goods.findIndex(item=> item.cid == cid)\n\t\t\tif(itemcid !== -1){\n\t\t\t\tthis.$set(this.goods[itemcid].dishList[good_index],'quantity',QU)\n\t\t\t}\n\t\t\t\n\t\t\tthis.qunint_of_goods()\n\t\t},\n\t\t\n\t\t// 清空已点：被子组件调用\n\t\tempty_data(){\n\t\t\tthis.shopping_card = []\n\t\t\tthis.itemize.forEach(item=>{item.sele_quantity = 0})\n\t\t\tthis.goods.forEach(item=>{\n\t\t\t\titem.dishList.forEach(T=>{\n\t\t\t\t\tT.quantity = 0\n\t\t\t\t})\n\t\t\t})\n\t\t\tthis.pop_Shopping(false)\n\t\t},\n\t\t\n\t\t// 弹出或隐藏单个商品弹出框\n\t\tpopup_item(value = true,index,good_index,cid,itemgood){\n\t\t\tthis.popupitem = value\n\t\t\tthis.pro_details = {index,good_index,cid,itemgood}\n\t\t\tconsole.log(this.pro_details)\n\t\t},\n\t\t// 显示购物车组件\n\t\tpop_Shopping(value = true){\n\t\t\tthis.card = value\n\t\t},\n\n\t\t// 请求数据\n\t\tasync dishEs() {\n\t\t\ttry {\n\t\t\t\tconsole.log('开始加载菜品数据');\n\t\t\t\t// 从本地存储获取商家ID\n\t\t\t\tconst merchantId = wx.getStorageSync('merchantId');\n\t\t\t\tconsole.log('商家ID:', merchantId);\n\t\t\t\t\n\t\t\t\tif (!merchantId) {\n\t\t\t\t\tthrow new Error('未获取到商家信息');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 获取所有菜品和分类\n\t\t\t\tconst res = await requestUtil({\n\t\t\t\t\turl: \"/dish/listAll\",\n\t\t\t\t\tmethod: \"get\",\n\t\t\t\t\tdata: { merchantId }\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tconsole.log('菜品数据响应:', res);\n\t\t\t\t\n\t\t\t\tif (res.code === 0) {\n\t\t\t\t\tconst categoryList = res.categoryList;\n\t\t\t\t\tif (categoryList && Array.isArray(categoryList)) {\n\t\t\t\t\t\tconsole.log('分类数据:', categoryList);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 设置分类数据\n\t\t\t\t\t\tthis.itemize = categoryList;\n\t\t\t\t\t\t// 设置商品数据\n\t\t\t\t\t\tthis.goods = categoryList;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 计算侧高度\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tthis.goods_height();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.exist = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('返回数据格式不正确');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(res.msg || '获取数据失败');\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('获取菜品数据失败：', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || '获取菜品数据失败',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// 计算右边每个分类菜品的高度\n\t\tgoods_height(){\n\t\t\tthis.heightset = []\n\t\t\tlet cate_height = 0\n\t\t\tconst query = wx.createSelectorQuery()\n\t\t\tquery.selectAll('.rig-height').boundingClientRect()\n\t\t\tquery.exec((res)=>{\n\t\t\t\tres[0].forEach((item)=>{\n\t\t\t\t\tcate_height += item.height\n\t\t\t\t\tthis.heightset.push(cate_height)\n\t\t\t\t})\n\t\t\t\tthis.exist = false\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 弹出订阅消息弹窗\n\t\tplacean_order(){\n\t\t\t// 消息弹窗\n\t\t\twx.requestSubscribeMessage({\n\t\t\t  tmplIds: [this.tmplIds],\n\t\t\t  success:(res)=>{\n\t\t\t\t  this.sub_database()\n\t\t\t  },\n\t\t\t  fail:(err)=>{\n\t\t\t\t  this.sub_database()\n\t\t\t  }\n\t\t\t})\n\t\t},\n\t\t\n\t\t\n\t\t// 提交订单\n\t\tasync sub_database(){\n\t\t\ttry {\n\t\t\t\twx.showLoading({title: '正在下单',mask:true})\n\t\t\t\t\n\t\t\t\t// 获取必要的信息\n\t\t\t\tconst userId = wx.getStorageSync('userId')\n\t\t\t\tconst merchantId = wx.getStorageSync('merchantId')\n\t\t\t\tconst table_number = wx.getStorageSync('table_num')\n\t\t\t\t\n\t\t\t\tconsole.log('订单信息:', {\n\t\t\t\t\tuserId,\n\t\t\t\t\tmerchantId,\n\t\t\t\t\ttable_number,\n\t\t\t\t\t'localStorage merchantId': wx.getStorageSync('merchantId'),\n\t\t\t\t\t'this.merchantId': this.merchantId,\n\t\t\t\t\t'localStorage userId': wx.getStorageSync('userId'),\n\t\t\t\t\t'this.userId': this.userId\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif (!merchantId) {\n\t\t\t\t\t// 如果merchantId为空，尝试重新获取\n\t\t\t\t\tconst res = await requestUtil({\n\t\t\t\t\t\turl: `/merchant/getByTable/${table_number}`,\n\t\t\t\t\t\tmethod: \"get\"\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tif (res.code === 0 && res.merchant) {\n\t\t\t\t\t\twx.setStorageSync('merchantId', res.merchant.id)\n\t\t\t\t\t\tthis.merchantId = res.merchant.id\n\t\t\t\t\t\tconsole.log('重新获取到的商家ID:', res.merchant.id)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('获取商家信息失败')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!userId || !merchantId || !table_number) {\n\t\t\t\t\tthrow new Error('缺少必要的订单信息')\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 1.过滤掉总价为0的购物车里的菜品\n\t\t\t\tlet goods_list = this.shopping_card.filter(item => item.total_price != 0)\n\t\t\t\tif (goods_list.length === 0) {\n\t\t\t\t\tthrow new Error('购物车为空')\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('购物车商品列表:', JSON.stringify(goods_list, null, 2))\n\t\t\t\t\n\t\t\t\t// 2.计算总价\n\t\t\t\tlet total_amount = 0\n\t\t\t\tgoods_list.forEach(item => {\n\t\t\t\t\ttotal_amount += item.total_price\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t// 3.生成订单号 (时间戳 + 随机数)\n\t\t\t\tconst order_no = new Date().getTime().toString() + Math.floor(Math.random() * 1000).toString()\n\t\t\t\t\n\t\t\t\t// 4.构建订单数据\n\t\t\t\tconst orderData = {\n\t\t\t\t\tmerchantId: merchantId,\n\t\t\t\t\tuserId: userId,\n\t\t\t\t\ttable_number: table_number,\n\t\t\t\t\torder_no: order_no,\n\t\t\t\t\ttotal_amount: total_amount,\n\t\t\t\t\tstatus: 1, // 1表示待支付状态\n\t\t\t\t\tgoods_list: goods_list.map(item => {\n\t\t\t\t\t\tconsole.log('购物车商品数据:', item);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tdish_id: item.id, // 使用商品的id作为dish_id\n\t\t\t\t\t\t\tquantity: item.quantity,\n\t\t\t\t\t\t\tprice: item.unitprice\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('提交订单数据:', JSON.stringify(orderData, null, 2));\n\t\t\t\t\n\t\t\t\tconst res = await requestUtil({\n\t\t\t\t\turl: \"/order/create\",\n\t\t\t\t\tdata: orderData,\n\t\t\t\t\tmethod: \"post\"\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tconsole.log('订单提交响应:', res)\n\t\t\t\t\n\t\t\t\tif (res.code === 0) {\n\t\t\t\t\t// 清空购物车\n\t\t\t\t\tthis.empty_data()\n\t\t\t\t\t\n\t\t\t\t\t// 构建完整的订单数据\n\t\t\t\t\tconst orderDetails = {\n\t\t\t\t\t\torder_no: order_no,\n\t\t\t\t\t\ttable_number: table_number,\n\t\t\t\t\t\ttotal_amount: total_amount,\n\t\t\t\t\t\tcreate_time: new Date().toISOString(),\n\t\t\t\t\t\tgoods_list: goods_list.map(item => ({\n\t\t\t\t\t\t\tdish_id: item.id,\n\t\t\t\t\t\t\tname: item.name,\n\t\t\t\t\t\t\tquantity: item.quantity,\n\t\t\t\t\t\t\tprice: item.unitprice,\n\t\t\t\t\t\t\tunit: item.unit,\n\t\t\t\t\t\t\timage: item.image\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 将订单数据存入本地缓存\n\t\t\t\t\twx.setStorageSync('current_order', orderDetails)\n\t\t\t\t\t\n\t\t\t\t\t// 跳转到订单详情页\n\t\t\t\t\twx.navigateTo({\n\t\t\t\t\t\turl: `/pages/order-details/details`\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(res.msg || '下单失败')\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('下单失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: error.message || '下单失败',\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\twx.hideLoading()\n\t\t\t}\n\t\t},\n\t\t\n\t\t\n\t\t// 推送订单提醒\n\t\tpush_message(){\n\t\t\tvar pubsub = this.goeasy.pubsub;\n\t\t\tpubsub.publish({\n\t\t\t    channel: \"my_channel\",//替换为您自己的channel\n\t\t\t    message: \"小程序端来的\",//替换为您想要发送的消息内容\n\t\t\t    onSuccess:()=>{\n\t\t\t        console.log(\"消息发布成功。\");\n\t\t\t    },\n\t\t\t    onFailed:(error)=> {\n\t\t\t        console.log(\"消息发送失败，错误编码：\"+error.code+\" 错误信息：\"+error.content);\n\t\t\t    }\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 我的订单\n\t\tmy_order(){\n\t\t\twx.navigateTo({\n\t\t\t\turl:'/pages/my-order/my-order'\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 显示用户名输入弹窗\n\t\tshowUserNamePopup() {\n\t\t  // 添加错误处理\n\t\t  try {\n\t\t    if (this.$refs.userNamePopup) {\n\t\t      this.$refs.userNamePopup.open();\n\t\t    } else {\n\t\t      console.error('弹窗组件未找到');\n\t\t    }\n\t\t  } catch (error) {\n\t\t    console.error('显示弹窗失败:', error);\n\t\t  }\n\t\t},\n\t\t\n\t\t// 关闭用户名输入弹窗\n\t\tcloseUserNamePopup() {\n\t\t\tthis.$refs.userNamePopup.close()\n\t\t},\n\t\t\n\t\t// 确认用户名\n\t\tasync confirmUserName(val) {\n\t\t\ttry {\n\t\t\t\tconsole.log('开始验证用名:', val);\n\t\t\t\tif (!val || val.trim() === '') {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '请输入姓名',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst res = await requestUtil({\n\t\t\t\t\turl: \"/user/verify\",\n\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tuserName: val.trim()\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tconsole.log('用户验证响应:', res);\n\t\t\t\t\n\t\t\t\tif (res.code === 0) {\n\t\t\t\t\t// 保存用户信息\n\t\t\t\t\twx.setStorageSync('userId', res.user.id);\n\t\t\t\t\twx.setStorageSync('userName', res.user.userName);\n\t\t\t\t\t\n\t\t\t\t\t// 关闭弹窗\n\t\t\t\t\tthis.$refs.userNamePopup.close();\n\t\t\t\t\t\n\t\t\t\t\t// 设置baseUrl\n\t\t\t\t\tthis.baseUrl = getBaseUrl();\n\t\t\t\t\t\n\t\t\t\t\t// 加载菜品数据\n\t\t\t\t\tawait this.dishEs();\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(res.msg || '证用户失败');\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('验证用户失败：', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: error.message || '验证用户失败',\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 去结账\n\t\tasync placean_order() {\n\t\t\tif (this.shopping_card.length === 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请先选择商品',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// 构造订单数据\n\t\t\t\tconst orderData = {\n\t\t\t\t\ttable_number: wx.getStorageSync('table_num'),  // 使用实际的桌号\n\t\t\t\t\ttotal_amount: this.total_price,  // 总金额\n\t\t\t\t\tgoods_list: this.shopping_card.map(item => ({\n\t\t\t\t\t\tdish_id: item.dish_id,  // 确保使用 dish_id\n\t\t\t\t\t\tquantity: item.quantity,\n\t\t\t\t\t\tprice: item.price\n\t\t\t\t\t}))\n\t\t\t\t};\n\n\t\t\t\tconsole.log('发送的订单数据:', JSON.stringify(orderData, null, 2));\n\n\t\t\t\tconst res = await requestUtil({\n\t\t\t\t\turl: '/order/create',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: orderData\n\t\t\t\t});\n\n\t\t\t\tif (res.code === 0) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '下单成功',\n\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t});\n\t\t\t\t\tthis.empty_data();  // 清空购物车\n\t\t\t\t\t\n\t\t\t\t\t// 延迟跳转，等待提示显示完成\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: '/pages/order-details/details',\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tconsole.log('跳转到订单详情页面成功');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\tconsole.error('跳转失败:', err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1500);\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: res.msg || '下单失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('下单失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '下单失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\nasync onLoad() {\n  try {\n    // 设置基础 URL\n    this.baseUrl = getBaseUrl();\n    \n    // 获取用餐人数\n    const number_people = wx.getStorageSync('number_of_diners');\n    if (number_people) {\n      this.number_people = number_people;\n    }\n    \n    // 获取桌号\n    const tableNumber = wx.getStorageSync('table_num');\n    if (!tableNumber) {\n      throw new Error('未获取到桌号信息');\n    }\n    \n    // 获取商家信息\n    const res = await requestUtil({\n      url: `/merchant/getByTable/${tableNumber}`,\n      method: \"get\"\n    });\n    \n    if (res.code === 0 && res.merchant) {\n      wx.setStorageSync('merchantId', res.merchant.id);\n      this.merchantId = res.merchant.id;\n      \n      // 等待页面渲染完成后再显示弹窗\n      setTimeout(() => {\n        this.showUserNamePopup();\n      }, 500);\n    } else {\n      throw new Error('获取商家信息失败');\n    }\n  } catch (error) {\n    console.error('初始化失败：', error);\n    uni.showToast({\n      title: error.message || '初始化失败',\n      icon: 'none',\n      duration: 2000\n    });\n  }\n},\n computed: {\n   total_quantity(){\n     let quantity = 0\n     this.shopping_card.forEach(item=>{\n       quantity += item.quantity\n     })\n     return quantity\n   },\n   total_price(){  \n     let total = 0\n     this.shopping_card.forEach(item=>{\n       total += item.total_price\n     })\n     return total.toFixed(2)\n   }\n }\n}\n</script>\n\n<style scoped>\n.top-view{\n\tbackground:linear-gradient(to bottom, #f7d45f,#f7d562,#f8d561,#f9db76, #f9de80);\n\theight: 120rpx;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 0 20rpx;\n\tposition: fixed;\n\ttop: 0;\n\tright: 0;\n\tleft: 0;\n}\n.top-view .top-image{\n\tdisplay: block;\n\twidth: 35rpx;\n\theight: 35rpx;\n}\n.top-view-flex{\n\tdisplay: flex;\n\talign-items: center;\n}\n.top-search{padding-right: 50rpx;}\n/* 点餐界面 */\n.order-view{margin-top: 120rpx;}\n.commodity {\n  display: flex;\n  position: fixed;\n  top: 120rpx;\n  left: 0;\n  right: 0;\n  bottom: 120rpx; /* 添加底部距离 */\n}\n.order-left{\n\tbackground-color: #fafafa;\n\twidth: 150rpx;\n\toverflow-y: auto;\n}\n.itemize-text{\n\tfont-size: 27rpx;\n\tpadding: 30rpx 10rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: #797979;\n}\n.itemize-text .text-item:nth-child(1){flex: 1;}\n.itemize-text .text-item:nth-child(2){\n\tbackground-color: #eb5941;\n\tborder-radius: 50%;\n\tfont-size: 20rpx;\n\tcolor: #FFFFFF;\n\twidth: 30rpx;\n\theight: 30rpx;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-left: 2rpx;\n}\n.scroll-Hei {\n  height: calc(100vh - 240rpx); /* 减去顶部栏(120rpx)和底部栏(120rpx)的高度 */\n}\n/* 移除多余的下方空白 */\n.order-right scroll-view {\n  padding-bottom: 0;\n}\n.classif{\n\tfont-size: 27rpx;\n\tpadding: 30rpx 20rpx;\n\tcolor: #797979;\n}\n/* 分类商品 */\n.classif-goods{\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tpadding: 0 20rpx;\n\theight: 150rpx;\n\tfont-size: 30rpx;\n\tmargin-bottom: 45rpx;\n}\n\n.goods-image .goods-img{\n\tdisplay: block;\n\twidth: 150rpx;\n\theight: 150rpx;\n\tborder-radius: 10rpx;\n}\n.goods-Price{\n\tflex: 1;\n\tposition: relative;\n\tpadding: 0 20rpx;\n}\n.goods-Price .price-text{\n\tdisplay: block;\n}\n.goods-name{\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\ttop: 0;\n}\n.goods-name .name-text:nth-child(1){\n\tpadding-bottom: 9rpx;\n}\n.unit-price{\n\tposition: absolute;\n\tbottom: 0;\n\tdisplay: flex;\n\talign-items: baseline;\n}\n.Bold{font-weight: bold;}\n.Symbol{font-size: 20rpx;}\n.Thinning{\n\tfont-size: 25rpx;\n\tcolor: #cccccc;\n}\n.quantity .quantity-img{\n\twidth: 50rpx;\n\theight: 50rpx;\n}\n.quantity{\n\tdisplay: flex;\n\talign-items: center;\n\talign-self: flex-end;\n\twidth: 200rpx;\n\tjustify-content: space-between;\n}\n/* 确保底部栏固定在底部 */\n.order-bottom {\n  background-color: #fefefe;\n  height: 120rpx;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 99; /* 提高层级确保显示在最上层 */\n  display: flex;\n  align-items: center;\n  padding: 0 20rpx;\n  box-shadow: 0 -2rpx 10rpx rgba(0,0,0,0.1);\n}\n.Shopping image{width: 75rpx; height: 75rpx; display: block;}\n.Shopping-left{width: 75rpx; height: 75rpx;}\n.Shopping{\n\tdisplay: flex;\n\talign-items: center;\n\t/* height: 120rpx; */\n}\n.Shopping-number{\n\talign-self: flex-start;\n\tbackground: #eb5941;\n\tcolor: #ffff;\n\twidth: 40rpx;\n\tborder-radius: 50rpx;\n\ttext-align: center;\n\tfont-size: 20rpx;\n\t/* margin-top: 15rpx; */\n}\n.Shopping-title{\n\tflex: 1;\n\tpadding: 0 25rpx;\n\tcolor: #999999;\n\t/* height: 120rpx;\n\tline-height: 120rpx; */\n}\n.place-order button{\n\tborder: none;\n\tbackground:linear-gradient(to right,#f8da81,#f8d771,#f7d362,#f6cb4a);\n\twidth: 200rpx;\n\theight: 75rpx;\n\tline-height: 75rpx;\n\tborder-radius: 50rpx;\n\tfont-weight: bold;\n\tz-index: 9;\n}\n/* 点击分类列表加上背景色 */\n.active{\n\tbackground-color: #FFFFFF;\n\tcolor: #000000 !important;\n}\n\n/* 底部购物车样式 */\n.order-bottom {\n  background-color: #fefefe;\n  height: 120rpx;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 99;\n  display: flex;\n  align-items: center;\n  padding: 0 20rpx;\n  box-shadow: 0 -2rpx 10rpx rgba(0,0,0,0.1);\n}\n\n.shopping {\n  position: relative;\n  width: 80rpx;\n  height: 80rpx;\n}\n\n.shopping-image {\n  width: 60rpx;\n  height: 60rpx;\n  display: block;\n}\n\n.shopping-num {\n  position: absolute;\n  top: -10rpx;\n  right: -10rpx;\n  background-color: #eb5941;\n  color: #ffffff;\n  font-size: 20rpx;\n  min-width: 32rpx;\n  height: 32rpx;\n  border-radius: 16rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 6rpx;\n}\n\n.order-price {\n  flex: 1;\n  padding: 0 20rpx;\n  font-size: 32rpx;\n}\n\n.price-symbol {\n  font-size: 24rpx;\n  color: #333;\n}\n\n.price-value {\n  font-size: 36rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.order-button {\n  background: linear-gradient(to right, #f8da81, #f8d771, #f7d362, #f6cb4a);\n  height: 80rpx;\n  line-height: 80rpx;\n  padding: 0 40rpx;\n  border-radius: 40rpx;\n  font-size: 30rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n/* 调整商品列表区域，避免被底部购物车遮挡 */\n.commodity {\n  display: flex;\n  position: fixed;\n  top: 120rpx;\n  left: 0;\n  right: 0;\n  bottom: 120rpx;\n}\n\n.order-right {\n  flex: 1;\n  overflow-y: auto;\n  background-color: #FFFFFF;\n  padding-bottom: 120rpx;\n}\n\n</style>\n","import mod from \"-!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./page.vue?vue&type=style&index=0&id=2f68e6da&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../test0/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./page.vue?vue&type=style&index=0&id=2f68e6da&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1735363228766\n      var cssReload = require(\"D:/test0/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}